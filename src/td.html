<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Tower Defense</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.12.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

    var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 800,
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    var enemies;
    var path;
    var graphics;
    
    var game = new Phaser.Game(config);

    function preload ()
    {
    this.load.image('background', 'assets/background.png');
    this.load.image('enemy', 'assets/tempEnemy.png');
    }//preload

    function create ()
    {
    this.add.image(400, 400, 'background');
    graphics = this.add.graphics();
    
    var xval = Math.floor(Math.random() * 2)*800;
    var yval = Math.floor(Math.random() *801);
    
    path = new Phaser.Curves.Path(xval, yval);
    
     var max = 8;

    for (var i = 0; i < max; i++)
    {
    if(Math.floor(Math.random()*2) == 0){
    xval = Math.floor(Math.random() *700)+50;
    }
     else{
       yval = Math.floor(Math.random() *700)+50;
       }
       path.lineTo(xval, yval);
    }
    
    xval = Math.floor(Math.random() * 801);
    yval = Math.floor(Math.random() * 2)*800;
    path.lineTo(xval, yval);

    enemies = this.add.group();

    for (var i = 0; i < 10; i++)
    {
        var ball = enemies.create(0, -50, 'enemy');

        ball.setData('vector', new Phaser.Math.Vector2());

        this.tweens.add({
            targets: ball,
            z: 1,
            ease: 'Linear',
            duration: 12000,
            delay: i * 100
        });
    
    }
    }//create

    function update ()
    {
     graphics.clear();
     graphics.lineStyle(15, 0x8b4513, 1);

    path.draw(graphics);

     var balls = enemies.getChildren();

    for (var i = 0; i < balls.length; i++)
    {
        var t = balls[i].z;
        var vec = balls[i].getData('vector');

        path.getPoint(t, vec);
        
        balls[i].setPosition(vec.x, vec.y);

        balls[i].setDepth(balls[i].y);
    }
    }//update

</script>

</body>
</html>